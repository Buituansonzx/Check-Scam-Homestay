# Docker Environment Configuration
# HoneStay Application

# Docker Services Ports - Cổng các dịch vụ Docker
NGINX_PORT=8080                        # Cổng Nginx web server (truy cập website)
MYSQL_PORT=3306                        # Cổng MySQL database
REDIS_PORT=6379                        # Cổng Redis cache server
MONGO_PORT=27017                       # Cổng MongoDB database
NOTIFICATION_PORT=8081                 # Cổng Homestay Notification service

# Database Configuration (for Docker) - Cấu hình Database cho Docker
DB_HOST=mysql                          # Hostname database (tên service trong docker-compose)
DB_PORT=3306                           # Cổng database
DB_DATABASE=honestay                   # Tên database
DB_USERNAME=honestay_user              # Username database (không được là root)
DB_PASSWORD=password                   # Password database
DB_ROOT_PASSWORD=rootpassword          # Password root MySQL

# Redis Configuration (for Docker) - Cấu hình Redis cho Docker
REDIS_HOST=redis                       # Hostname Redis (tên service trong docker-compose)
REDIS_PORT=6379                        # Cổng Redis
REDIS_VERSION=alpine                   # Phiên bản Redis (alpine = nhẹ)
REDIS_PASSWORD=""                      # Mật khẩu Redis (để trống = không mật khẩu)
REDIS_MAXMEMORY=256mb                  # Giới hạn RAM tối đa cho Redis
REDIS_MAXMEMORY_POLICY=allkeys-lru     # Chính sách xóa dữ liệu khi hết RAM
REDIS_SAVE_INTERVAL="900 1 300 10 60 10000"  # Lưu snapshot theo thời gian
REDIS_LOG_LEVEL=notice                 # Mức độ log (debug, verbose, notice, warning)
REDIS_DATABASES=16                     # Số database Redis (0-15)
REDIS_TIMEOUT=300                      # Timeout kết nối (giây)

# MongoDB Configuration (for Docker) - Cấu hình MongoDB cho Docker
MONGO_HOST=mongodb                     # Hostname MongoDB (tên service trong docker-compose)
MONGO_PORT=27017                       # Cổng MongoDB
MONGO_VERSION=7.0                      # Phiên bản MongoDB
MONGO_INITDB_ROOT_USERNAME=admin       # Username admin MongoDB
MONGO_INITDB_ROOT_PASSWORD=adminpassword # Password admin MongoDB
MONGO_INITDB_DATABASE=honestay_mongo   # Tên database chính
MONGO_USERNAME=honestay_user           # Username ứng dụng MongoDB
MONGO_PASSWORD=password                # Password ứng dụng MongoDB
MONGO_MAX_CONNECTIONS=1000             # Số kết nối tối đa
MONGO_CACHE_SIZE_GB=1                  # Kích thước cache (GB)
MONGO_OPLOG_SIZE_MB=1024              # Kích thước oplog (MB)

# PHP Configuration - Cấu hình PHP
PHP_VERSION=8.2                        # Phiên bản PHP sử dụng
PHP_MEMORY_LIMIT=256M                   # Giới hạn RAM cho mỗi script PHP
PHP_UPLOAD_MAX_FILESIZE=20M             # Kích thước tối đa file upload
PHP_POST_MAX_SIZE=20M                   # Kích thước tối đa dữ liệu POST
PHP_MAX_EXECUTION_TIME=30               # Thời gian tối đa thực thi script (giây)
PHP_MAX_INPUT_VARS=1000                 # Số lượng biến input tối đa
INSTALL_SUPERVISOR=true                 # Cài đặt Supervisor để quản lý process

# PHP Extensions Configuration - Cấu hình extensions PHP
PHP_OPCACHE_ENABLE=1                    # Bật OPCache để tăng tốc PHP (1=bật, 0=tắt)
PHP_OPCACHE_MEMORY_CONSUMPTION=128      # Dung lượng RAM dành cho OPCache (MB)
PHP_OPCACHE_MAX_ACCELERATED_FILES=4000  # Số file tối đa cache trong OPCache

# Node.js Configuration - Cấu hình Node.js
NODE_VERSION=18                         # Phiên bản Node.js sử dụng
NPM_REGISTRY=https://registry.npmjs.org # Registry npm để download packages
PHP_OPCACHE_MAX_ACCELERATED_FILES=10000 # Số file tối đa được cache

# PHP-FPM Configuration - Cấu hình PHP FastCGI Process Manager
PHP_FPM_USER=www                       # User chạy PHP-FPM (bảo mật)
PHP_FPM_GROUP=www                      # Group của user PHP-FPM
PHP_FPM_LISTEN=9000                    # Cổng PHP-FPM lắng nghe request từ Nginx
PHP_FPM_PM=dynamic                     # Chế độ quản lý process (dynamic/static/ondemand)
PHP_FPM_PM_MAX_CHILDREN=50             # Số worker process tối đa có thể chạy đồng thời
PHP_FPM_PM_START_SERVERS=5             # Số worker process khởi tạo ban đầu
PHP_FPM_PM_MIN_SPARE_SERVERS=5         # Số worker process rảnh tối thiểu (standby)
PHP_FPM_PM_MAX_SPARE_SERVERS=35        # Số worker process rảnh tối đa

# Composer Configuration - Cấu hình Composer (PHP dependency manager)
COMPOSER_MEMORY_LIMIT=-1               # Giới hạn RAM cho Composer (-1 = không giới hạn)
COMPOSER_PROCESS_TIMEOUT=2000          # Timeout cho process Composer (giây)
COMPOSER_ALLOW_SUPERUSER=1             # Cho phép chạy Composer với quyền root

# Supervisor Configuration - Cấu hình Supervisor (quản lý process)
SUPERVISOR_LOG_LEVEL=info              # Mức độ log (debug, info, warn, error)
SUPERVISOR_NODAEMON=true               # Chạy ở foreground mode (cho Docker)

# Container User Configuration - Cấu hình user trong container
CONTAINER_USER_ID=1000                 # User ID trong container (đồng bộ với host)
CONTAINER_GROUP_ID=1000                # Group ID trong container
CONTAINER_USER=www                     # Tên user trong container
CONTAINER_GROUP=www                    # Tên group trong container

# MySQL Configuration - Cấu hình MySQL
MYSQL_VERSION=8.0                      # Phiên bản MySQL
MYSQL_DATA_PATH=./data/mysql           # Đường dẫn lưu trữ data MySQL
MYSQL_MAX_CONNECTIONS=200              # Số kết nối tối đa
MYSQL_INNODB_BUFFER_POOL_SIZE=256M     # Kích thước buffer pool InnoDB
MYSQL_QUERY_CACHE_SIZE=64M             # Kích thước query cache
MYSQL_LOG_ERROR=/var/log/mysql/error.log # Đường dẫn file log lỗi
MYSQL_SLOW_QUERY_LOG=1                 # Bật slow query log (1=bật, 0=tắt)
MYSQL_LONG_QUERY_TIME=2                # Thời gian query được coi là chậm (giây)

# Nginx Configuration - Cấu hình Nginx
NGINX_VERSION=alpine                   # Phiên bản Nginx (alpine = nhẹ)
NGINX_WORKER_PROCESSES=auto            # Số worker process (auto = theo CPU cores)
NGINX_WORKER_CONNECTIONS=1024          # Số kết nối tối đa mỗi worker
NGINX_CLIENT_MAX_BODY_SIZE=2048M         # Kích thước tối đa request body
NGINX_KEEPALIVE_TIMEOUT=650             # Thời gian giữ kết nối (giây)
NGINX_GZIP=on                          # Bật nén gzip (on/off)
NGINX_CONF_PATH=./nginx/nginx.conf     # Đường dẫn file cấu hình Nginx
NGINX_LOG_PATH=./logs/nginx            # Đường dẫn lưu log Nginx

# Application Paths - Đường dẫn ứng dụng
APP_CODE_PATH_HOST=..                    # Đường dẫn source code trên host (thư mục Homestay)
APP_CODE_PATH_CONTAINER=/var/www/html    # Đường dẫn source code trong container

# Timezone - Múi giờ
TIMEZONE=Asia/Ho_Chi_Minh              # Múi giờ Việt Nam
